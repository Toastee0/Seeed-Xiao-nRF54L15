CONFIG_MAIN_STACK_SIZE=8192

# Required for math functions and DMIC
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y
CONFIG_NEWLIB_LIBC_FLOAT_SCANF=y

#CONFIG_BT_SMP=y
CONFIG_BT=y
CONFIG_BT_HCI=y
CONFIG_LOG=y
CONFIG_BT_BROADCASTER=y
# Extended Advertising required for BAP broadcast (>31 bytes)
CONFIG_BT_EXT_ADV=y
CONFIG_BT_EXT_ADV_MAX_ADV_SET=1
CONFIG_BT_PER_ADV=y
CONFIG_BT_CTLR_ADV_DATA_LEN_MAX=191

# Zephyr Bluetooth Controller for BLE Audio ISO
CONFIG_BT_LL_SW_SPLIT=y
CONFIG_BT_CTLR_ADV_ISO=y
CONFIG_BT_CTLR_ADV_ISO_SEQUENTIAL=y
CONFIG_BT_CTLR_ADV_ISO_INTERLEAVED=y
CONFIG_BT_CTLR_ADV_ISO_PDU_LEN_MAX=155
CONFIG_BT_CTLR_ADV_ISO_STREAM_MAX=2
CONFIG_BT_CTLR_ISOAL_SOURCES=2
CONFIG_BT_CTLR_ISO_TX_BUFFER_SIZE=163
CONFIG_BT_CTLR_ISO_TX_SDU_LEN_MAX=155

CONFIG_BT_AUDIO=y
CONFIG_BT_ISO_BROADCASTER=y
CONFIG_BT_BAP_BROADCAST_SOURCE=y

# Enable LC3 codec support
CONFIG_FPU=y
CONFIG_LIBLC3=y

# Audio processing configuration
CONFIG_BAP_BROADCAST_16_2_1=y

# DMIC/PDM microphone support
CONFIG_AUDIO=y
CONFIG_AUDIO_DMIC=y

# Memory for threading and audio processing
CONFIG_HEAP_MEM_POOL_SIZE=32768

CONFIG_BT_ISO_MAX_CHAN=2
CONFIG_BT_BAP_BROADCAST_SRC_STREAM_COUNT=2
# Two streams in one subgroup (stereo)
CONFIG_BT_BAP_BROADCAST_SRC_SUBGROUP_COUNT=1

# Uncomment below to use Broadcast ISO interleaved packing
# CONFIG_ISO_PACKING_INTERLEAVED=y

CONFIG_BT_ISO_TX_BUF_COUNT=6
CONFIG_BT_ISO_TX_MTU=60

CONFIG_BT_DEVICE_NAME="xiao Mic"
CONFIG_BROADCAST_ID=0x123456
